<html><head>
  <title>Check_MK 플러그인 초기화 과정 분석</title>
  <basefont face="맑은 고딕 Semilight" size="2">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="exporter-version" content="Evernote Windows/308489 (ko-KR, DDL); Windows/10.0.0 (Win64);">
  <style>
    body, td {
      font-family: 맑은 고딕 Semilight;
      font-size: 10pt;
    }
  </style>

    <link rel="stylesheet" href="Check_MK2_files/style.css">

   <!-- Global site tag (gtag.js) - Google Analytics -->
<script type="text/javascript" async="" src="Check_MK2_files/analytics.js"></script><script async="" src="Check_MK2_files/js"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-138982878-1');
</script>



<script src="Check_MK2_files/embed.js" data-timestamp="1557712826780"></script><link rel="prefetch" as="style" href="Check_MK2_files/a_data/lounge.css"><link rel="prefetch" as="script" href="Check_MK2_files/a_data/common.js"><link rel="prefetch" as="script" href="Check_MK2_files/a_data/lounge.js"><link rel="prefetch" as="script" href="Check_MK2_files/a_data/config.js"><script src="Check_MK2_files/alfalfa_min.js" async="" charset="UTF-8"></script></head>
<body>

  <h1 id="js_main"><a href="index.html" title="WEB Home">WEB - 코딩무료강의</a></h1>
  <div id="grid">
    <ol>
      <li><a href="1.html" class="saw">HTML</a></li>
      <li><a href="2.html" class="saw" id="active">CSS</a></li>
      <li><a href="3.html">JavasCript</a></li>
      <li><a href="Check_MK1.html">mod_python</a></li>
	  <li><a href="Check_MK2.html">plugin_init</a></li>
      <li><a href="Check_MK3.html">page_handlers</a></li>
    <div id="article">

<a name="16936">

<div>
<span><div><span style="font-family: &quot;맑은 고딕&quot;;">Check_MK 플러그인 초기화 과정 분석, load_web_plugins()</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">Check_MK 플러그인들이 초기화되는 과정, load_web_plugins() -&gt; plugin dir 초기화</span></div><div><br></div><div><span style="font-family: &quot;맑은 고딕&quot;;">- index.py 모듈의 handler() 함수가 처음 config 를 초기화 하면서 load_web_plugins()을 호출하면 Pugins 디렉토리에 있는 .py 파일들이 실행되면서 초기화된다.</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">-&nbsp;Pugins 디렉토리 아래의 py 파일들이 실행되면서 딕셔너리 및 데이터들이 설정된다.</span></div><div>- 어떤 소스를 완벽하게 분석하려면 그 소스를 직접 짜는 것보다 더 뛰어난 실력이 있어야 가능하며 시간은 그 소스를 직접 짜는 것보다 조금쯤 덜 걸린다.</div><div>- 프로그램을 개발하다보면 문서화 작업이 소홀할 때가 있다. 나중에 문서화해야지 하고 마음 먹어보지만 그것도 쉽지 않은 일이다.&nbsp;</div><div>- 결국 시간이 좀 걸리긴 하나 프로그램 개발과 문서화 작업은 병행해야 한다.</div><div><b><br></b></div><div><b>n. index.py 파일의 handler() 함수의 page_handlers() 호출 과정</b></div><div><span style="font-family: &quot;맑은 고딕&quot;;">def handler(mod_python_req, fields = None, is_profiling = False):</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp; &nbsp; &nbsp; -&gt;</span> <span style="font-family: &quot;맑은 고딕&quot;;">modules.load_all_plugins()</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt; def load_all_plugins()</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt; pagehandlers.update(pagetypes.page_handlers())</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt;&nbsp;</span> <span style="font-family: &quot;맑은 고딕&quot;;">page_handlers.update(page_type.page_handlers())</span></div><div><br></div><div><span style="font-family: &quot;맑은 고딕&quot;; font-weight: bold;">pagetypes.py 파일의&nbsp;</span><span style="font-family: &quot;맑은 고딕&quot;;"><b>pagehandlers.update() 메소드가 빈 딕셔너리를 update 해서 내용을 채운다.</b></span></div><div><span style="font-size: 11pt;"><span style="font-size: 11pt; color: rgb(45, 79, 201);"># index.py uses the following function in order to complete its</span></span></div><div><span style="font-size: 11pt;"><span style="font-size: 11pt; color: rgb(45, 79, 201);"># page handler table</span></span></div><div><span style="font-size: 11pt;"><span style="font-size: 11pt; color: rgb(45, 79, 201);">def page_handlers():</span></span></div><div><span style="font-size: 11pt;"><span style="font-size: 11pt; color: rgb(45, 79, 201);">&nbsp;&nbsp;&nbsp;&nbsp;page_handlers = {}</span></span></div><div><span style="font-size: 11pt;"><span style="font-size: 11pt; color: rgb(45, 79, 201);">&nbsp;&nbsp;&nbsp;&nbsp;for page_type in page_types.values():</span></span></div><div><span style="font-size: 11pt;"><span style="font-size: 11pt; color: rgb(45, 79, 201);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-size: 11pt; color: rgb(255, 0, 0);">page_handlers.update(page_type.page_handlers())</span></span></div><div><span style="font-size: 11pt;"><br></span></div><div><span style="font-size: 11pt;"><span style="font-size: 11pt; color: rgb(45, 79, 201);">&nbsp;&nbsp;&nbsp;&nbsp;# Ajax handler for adding elements to a container</span></span></div><div><span style="font-size: 11pt;"><span style="font-size: 11pt; color: rgb(45, 79, 201);">&nbsp;&nbsp;&nbsp;&nbsp;# TODO: Shouldn't we move that declaration into the class?</span></span></div><div><span style="font-size: 11pt;"><span style="font-size: 11pt; color: rgb(45, 79, 201);">&nbsp;&nbsp;&nbsp;&nbsp;page_handlers["ajax_pagetype_add_element"] = lambda: OverridableContainer.ajax_add_element()</span></span></div><div><span style="font-size: 11pt;"><br></span></div><div><b><br></b></div><div><b>n. 실제로 호출되는 plugin file 이름을 추적해보자..</b></div><div>index.py
 -&gt;&nbsp;config.initialize() -&gt; config.load_config()
-&gt;&nbsp;load_plugins(true) -&gt; load_web_plugins("config",
globals()) -&gt;&nbsp;lib.py -&gt; load_web_plugins -&gt; execfile
-&gt;&nbsp;cmk.paths.local_web_dir + "/plugins/" + forwhat</div><div><br></div><div><span style="color: rgb(255, 0, 0); font-family: &quot;맑은 고딕&quot;;">dashboard.py -&gt;&nbsp;</span><span style="color: rgb(255, 0, 0); font-family: &quot;맑은 고딕&quot;;">load_web_plugins("dashboard", globals()) -&gt; lib.py -&gt;&nbsp;</span><span style="color: rgb(255, 0, 0); font-family: &quot;맑은 고딕&quot;;">load_web_plugins -&gt;&nbsp;</span><span style="color: rgb(255, 0, 0); font-family: &quot;맑은 고딕&quot;;">execfile -&gt;</span></div><div><span style="color: rgb(255, 0, 0); font-family: &quot;맑은 고딕&quot;;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span> <span style="color: rgb(255, 0, 0); font-family: &quot;맑은 고딕&quot;;">/omd/sites/sjopen/share/check_mk/web/plugins/dashboard/builtin.py</span><span style="color: rgb(255, 0, 0); font-family: &quot;맑은 고딕&quot;;">&nbsp; (데시보드 제목, 위치 등에 대한 데이터 딕셔너리)</span></div><div><span style="color: rgb(255, 0, 0); font-family: &quot;맑은 고딕&quot;;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="color: rgb(255, 0, 0); font-family: &quot;맑은 고딕&quot;;">/omd/sites/sjopen/share/check_mk/web/plugins/dashboard/dashlets.py&nbsp; (실제로 화면에 보여주는 내용)</span></div><div><br></div><div><span style="font-weight: bold;">n. dashboard 플러그인 분석</span></div><div>- CMV 에서 view 에 해당하는 코드, 브라우저에 리턴할 HTML 코드를 작성한다.</div><div>/omd/sites/sjopen/share/check_mk/web/plugins/dashboard/dashlets.py</div><div>def dashlet_overview(nr, dashlet):</div><div><br></div><div>&nbsp;&nbsp;&nbsp;&nbsp;html.open_table(class_="dashlet_overview")</div><div>&nbsp;&nbsp;&nbsp;&nbsp;html.open_tr()</div><div>&nbsp;&nbsp;&nbsp;&nbsp;html.open_td(valign="top")</div><div>&nbsp;&nbsp;&nbsp;&nbsp;html.open_a(href="https://mathias-kettner.com/check_mk.html")</div><div>&nbsp;&nbsp;&nbsp;&nbsp;html.img("images/check_mk.trans.120.png", style="margin-right: 30px;")</div><div>&nbsp;&nbsp;&nbsp;&nbsp;html.close_a()</div><div>&nbsp;&nbsp;&nbsp;&nbsp;html.close_td()</div><div><br></div><div>&nbsp;&nbsp;&nbsp;&nbsp;html.open_td()</div><div>&nbsp;&nbsp;&nbsp;&nbsp;html.h2("Check_MK Multisite")</div><div>&nbsp;&nbsp;&nbsp;&nbsp;html.write_html('Welcome
 to Check_MK Multisite. If you want to learn more about Multisite,
please visit '</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'our
 &lt;a
href="https://mathias-kettner.com/checkmk_multisite.html"&gt;online
documentation&lt;/a&gt;. '</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Multisite
 is part of &lt;a
href="https://mathias-kettner.com/check_mk.html"&gt;Check_MK&lt;/a&gt; -
 an Open Source '</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'project
 by &lt;a href="https://mathias-kettner.com"&gt;Mathias
Kettner&lt;/a&gt;.')</div><div>&nbsp;&nbsp;&nbsp;&nbsp;html.close_td()</div><div><br></div><div>&nbsp;&nbsp;&nbsp;&nbsp;html.close_tr()</div><div>&nbsp;&nbsp;&nbsp;&nbsp;html.close_table()</div><div><br></div><div><br></div><div><b>n. plugin 파일을 로드하는 코드 분석</b></div><div>- plugin 을 통해서 URL 을 헨들러를 맵핑하는 route 기능이 구현된다.</div><div><span style="font-family: &quot;맑은 고딕&quot;;">lib.py</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;"># Load all files below share/check_mk/web/plugins/WHAT into a</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;"># specified context (global variables). Also honors the</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;"># local-hierarchy for OMD</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;"># TODO: Couldn't we precompile all our plugins during packaging to make loading faster?</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;"># TODO: Replace the execfile thing by some more pythonic plugin structure. But this would</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;be a large rewrite :-/</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">def load_web_plugins(forwhat, globalvars):</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;for plugins_path in [ cmk.paths.web_dir + "/plugins/" + forwhat,</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cmk.paths.local_web_dir
 + "/plugins/" + forwhat ]:</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if not os.path.exists(plugins_path):</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for fn in sorted(os.listdir(plugins_path)):</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path = plugins_path + "/" + fn</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if
 fn.endswith(".py") and not os.path.exists(file_path + "c"):</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;execfile(file_path, globalvars)</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif fn.endswith(".pyc"):</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_bytes
 = file(file_path).read()[8:]</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code = marshal.loads(code_bytes)</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exec code in globalvars</span></div><div><br></div><div><b>n. mod_python 에서 실제로 생성된 객체 확인(index.py 에서 테스트 코드로 확인했음)</b></div><div><span style="font-family: &quot;맑은 고딕&quot;;">cmk.paths.web_dir is =&nbsp;</span><span style="font-family: &quot;맑은 고딕&quot;;">/omd/sites/sjopen/share/check_mk/web</span></div><div><span style="font-size: medium; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: &quot;Malgun Gothic&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">cmk.paths.local_web_dir is =/omd/sites/sjopen/local/share/check_mk/web</span></div><div><span style="color: rgb(255, 0, 0); font-family: &quot;맑은 고딕&quot;;">/omd/sites/sjopen/share/check_mk/web/</span><span style="color: rgb(255, 0, 0); font-family: &quot;맑은 고딕&quot;;">plugins</span></div><div><span style="color: rgb(54, 101, 238); font-family: &quot;맑은 고딕&quot;;">config&nbsp;&nbsp;cron&nbsp;&nbsp;dashboard&nbsp;&nbsp;icons&nbsp;&nbsp;metrics&nbsp;&nbsp;pages&nbsp;&nbsp;perfometer&nbsp;&nbsp;sidebar&nbsp;&nbsp;userdb&nbsp;&nbsp;views&nbsp;&nbsp;visuals&nbsp;&nbsp;wato&nbsp;&nbsp;webapi</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">/omd/sites/sjopen/local/share/check_mk/web/plugins/</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">config&nbsp;&nbsp;dashboard&nbsp;&nbsp;icons&nbsp;&nbsp;metrics&nbsp;&nbsp;pages&nbsp;&nbsp;perfometer&nbsp;&nbsp;sidebar&nbsp;&nbsp;views&nbsp;&nbsp;visuals&nbsp;&nbsp;wato
 ==&gt; ALL ZERO</span></div><div><br></div><div><b>n. 데시보드 제목 수정하기</b></div><div>- 딕셔너리 Value 를 직접 수정해준다.</div><div>/omd/sites/sjopen/share/check_mk/web/plugins/dashboard/builtin.py</div><div>builtin_dashboards["main"] = {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;"single_infos": [],</div><div>&nbsp;&nbsp;&nbsp;&nbsp;"context"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: {},</div><div>&nbsp;&nbsp;&nbsp;&nbsp;"mtime"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 0,</div><div>&nbsp;&nbsp;&nbsp;&nbsp;"show_title"&nbsp;&nbsp;: True,</div><div>&nbsp;&nbsp;&nbsp;&nbsp;"title"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: _("IBM KTS Nagios Monitoring!!!, Main Overview"),</div><div>&nbsp;&nbsp;&nbsp;&nbsp;"topic"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: _("Overview"),</div><div>&nbsp;&nbsp;&nbsp;&nbsp;"description" : _("This dashboard gives you a general overview on the state of your "</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"monitored
 devices."),</div><div>&nbsp;&nbsp;&nbsp;&nbsp;"dashlets" : [</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"title"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:
 _("Host Statistics"),</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"type"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:
 'hoststats',</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"position"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: (1, 1),</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"refresh"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 60,</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"show_title"&nbsp;&nbsp;&nbsp;: True,</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'context'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'wato_folder': {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'wato_folder':
 '',</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'single_infos' : [],</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div><div><br></div><div><br></div><div><span style="font-family: &quot;맑은 고딕&quot;;"><img src="Check_MK2_files/Image.png" type="image/png" data-filename="Image.png"></span></div><div><br></div><div><span style="font-family: &quot;맑은 고딕&quot;;"><b>n. index.py 파일에 디버그 코드를 추가하기</b></span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp;- 파일로 저장한 다음 하단 프레임에 표시하면 mod_python 내부 정보를 확인할 수 있다.</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Get page handler.</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handler = modules.get_handler(html.myfile, page_not_found)</span></div><div><br></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f1 = open("/omd/sites/sjopen/share/check_mk/web/htdocs/bottom.html", 'w')</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f1.write("&lt;p&gt;cmk.paths.web_dir
 is = " + cmk.paths.web_dir + "&lt;/p&gt;\n")</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f1.write("&lt;p&gt;cmk.paths.local_web_dir
 is = " +&nbsp;&nbsp;cmk.paths.local_web_dir + "&lt;/p&gt;\n")</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f1.write("&lt;p&gt;pagehandlers
 kyes is = " + str(modules.pagehandlers.keys()) + "&lt;/p&gt;\n")</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f1.write("&lt;p&gt;pagehandlers
 values is = " + str(modules.pagehandlers.values()) + "&lt;/p&gt;\n")</span></div><div><span style="font-family: &quot;맑은 고딕&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f1.close()</span></div><div><br></div><div><br></div><div><br></div><div><b>n. index.py 에서 사용하는 sys.path() 조회</b></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f1 = open("/omd/sites/sjopen/share/check_mk/web/htdocs/bottom.html", 'w')</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f1.write("cmk.paths.web_dir is = " + cmk.paths.web_dir + "&lt;br&gt;\n")</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f1.write("cmk.paths.local_web_dir
 is = " +&nbsp;&nbsp;cmk.paths.local_web_dir + "&lt;br&gt;\n")</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f1.write("&lt;p&gt;pagehandlers
 kyes is = " + str(modules.pagehandlers.keys()) + "&lt;/p&gt;\n")</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#
 f1.write("&lt;p&gt;pagehandlers values is = " +
str(modules.pagehandlers.values()) + "&lt;/p&gt;\n")</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f1.write("&lt;p&gt;" + str(dir()) + "&lt;/p&gt;\n")</div><div><br></div><div>&nbsp; &nbsp; &nbsp; &nbsp; f1.write("&lt;p&gt;\n")</div><div>&nbsp; &nbsp; &nbsp; &nbsp; for i in sys.path:</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; f1.write(i + "&lt;br&gt;\n")</div><div>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; f1.write("&lt;/p&gt;\n")</div><div><br></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f1.close()</div><div><br></div><div><br></div><div><span style="font-size: medium; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: &quot;Malgun Gothic&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">cmk.paths.web_dir is = /omd/sites/sjopen/share/check_mk/web</span></div><div><span style="font-size: medium; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: &quot;Malgun Gothic&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">cmk.paths.local_web_dir is = /omd/sites/sjopen/local/share/check_mk/web</span></div><div style="font-size: medium; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: medium; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: &quot;Malgun Gothic&quot;; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">pagehandlers
 kyes is = ['bi_set_assumption', 'ajax_popup_action_menu',
'switch_master_state', 'edit_views', 'dashboard_dashlet',
'ajax_pagetype_add_element', 'bi_debug', 'sidebar_get_messages',
'delete_dashlet', 'noauth:pnp_template', 'edit_view', 'sidebar_fold',
'download_agent_output', 'tree_openclose',
'sidebar_ajax_set_snapin_site', 'create_view_dashlet_infos',
'ajax_backup_job_state', 'gui_crash', 'ajax_set_viewoption',
'ajax_search', 'ajax_popup_move_to_folder', 'ajax_activation_state',
'wato_ajax_diag_host', 'noauth:run_cron', 'sidebar_message_read',
'sidebar_openclose', 'sidebar_move_snapin', 'user_change_pw',
'search_open', 'bi_render_tree', 'ajax_popup_add_visual',
'ajax_vs_autocomplete', 'mobile_view', 'ajax_add_visual',
'host_inv_api', 'wato_ajax_profile_repl', 'ajax_switch_help',
'ajax_set_foldertree', 'noauth:automation', 'ajax_start_activation',
'create_view_dashlet', 'dashboard', 'ajax_userdb_sync',
'automation_login', 'side', 'crashed_check', 'notify',
'host_service_graph_popup', 'sidebar_ajax_tag_tree', 'switch_site',
'sidebar_add_snapin', 'download_crash_report', 'ajax_reschedule',
'graph_dashlet', 'ajax_popup_icon_selector', 'index',
'ajax_set_rowselection', 'version', 'bookmark_lists',
'edit_bookmark_list', 'add_bookmark', 'ajax_delete_user_notification',
'edit_dashboards', 'sidebar_ajax_speedometer', 'webapi', 'wato',
'user_profile', 'bi', 'clear_failed_notifications', 'bi_save_treestate',
 'edit_dashboard', 'logout', 'edit_dashlet', 'werk', 'login',
'ajax_dashlet_pos', 'sidebar_ajax_tag_tree_enter',
'ajax_inv_render_tree', 'mobile', 'logwatch', 'prediction_graph',
'create_view', 'export_views', 'create_view_infos',
'wato_ajax_execute_check', 'sidebar_snapin', 'count_context_button',
'guitest_reschedule_all', 'view', 'create_dashboard']</span></div><div style="font-size: medium; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: medium; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: &quot;Malgun Gothic&quot;; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">['f1', 'fields', 'handler', 'is_profiling', 'mod_python_req', 'response_code']</span></div><div>/omd/sites/sjopen/local/share/check_mk/web/htdocs</div><div>/omd/sites/sjopen/share/check_mk/web/htdocs</div><div>/omd/versions/1.4.0p33.cre/lib/python</div><div>/omd/sites/sjopen/lib/python</div><div>/omd/sites/sjopen/local/lib/python</div><div>/omd/sites/sjopen/lib/python/MySQL_python-1.2.5-py2.7-linux-x86_64.egg</div><div>/omd/sites/sjopen/lib/python/cffi-1.11.5-py2.7-linux-x86_64.egg</div><div>/omd/sites/sjopen/lib/python/asn1crypto-0.24.0-py2.7.egg</div><div>/omd/sites/sjopen/lib/python/dnspython-1.15.0-py2.7.egg</div><div>/omd/sites/sjopen/lib/python/netifaces-0.10.6-py2.7-linux-x86_64.egg</div><div>/omd/sites/sjopen/lib/python/paramiko-2.1.2-py2.7.egg</div><div>/omd/sites/sjopen/lib/python/cryptography-1.9-py2.7-linux-x86_64.egg</div><div>/omd/sites/sjopen/lib/python/ipaddress-1.0.22-py2.7.egg</div><div>/omd/sites/sjopen/lib/python/enum34-1.1.6-py2.7.egg</div><div>/omd/sites/sjopen/lib/python/idna-2.5-py2.7.egg</div><div>/omd/sites/sjopen/lib/python/psutil-5.2.0-py2.7-linux-x86_64.egg</div><div>/omd/sites/sjopen/lib/python/psycopg2-2.6.2-py2.7-linux-x86_64.egg</div><div>/omd/sites/sjopen/lib/python/pyOpenSSL-16.2.0-py2.7.egg</div><div>/omd/sites/sjopen/lib/python/pymssql-2.1.3-py2.7-linux-x86_64.egg</div><div>/omd/sites/sjopen/lib/python/ply-3.10-py2.7.egg</div><div>/omd/sites/sjopen/lib/python/pysnmp-4.3.5-py2.7.egg</div><div>/omd/sites/sjopen/lib/python/pycryptodome-3.4.5-py2.7-linux-x86_64.egg</div><div>/omd/sites/sjopen/lib/python/pysmi-0.1.0-py2.7.egg</div><div>/omd/sites/sjopen/lib/python/pyasn1-0.2.3-py2.7.egg</div><div>/omd/sites/sjopen/lib/python/pysphere-0.1.7-py2.7.egg</div><div>/omd/sites/sjopen/lib/python/python_ad-0.9-py2.7.egg</div><div>/omd/sites/sjopen/lib/python/python_dateutil-2.6.1-py2.7.egg</div><div>/omd/sites/sjopen/lib/python/python_ldap-2.4.32-py2.7-linux-x86_64.egg</div><div>/omd/sites/sjopen/lib/python/reportlab-3.3.0-py2.7-linux-x86_64.egg</div><div>/omd/sites/sjopen/lib/python/pip-9.0.1-py2.7.egg</div><div>/omd/sites/sjopen/lib/python/Pillow-3.4.2-py2.7-linux-x86_64.egg</div><div>/omd/sites/sjopen/lib/python/requests_kerberos-0.11.0-py2.7.egg</div><div>/omd/sites/sjopen/lib/python/pykerberos-1.1.14-py2.7-linux-x86_64.egg</div><div>/omd/sites/sjopen/lib/python/requests-2.13.0-py2.7.egg&nbsp; ==&gt;&nbsp; <span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: &quot;Noto Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">Python에서 HTTP 요청을 보내고 응답을 받는 모듈</span></div><div>/omd/sites/sjopen/lib/python/setuptools-28.8.0-py2.7.egg</div><div>/omd/sites/sjopen/lib/python/setuptools_git-1.1-py2.7.egg</div><div>/omd/sites/sjopen/lib/python/simplejson-3.10.0-py2.7-linux-x86_64.egg</div><div>/omd/sites/sjopen/lib/python/six-1.10.0-py2.7.egg</div><div>/omd/sites/sjopen/lib/python/tinkerforge-2.1.11-py2.7.egg</div><div>/omd/sites/sjopen/lib/python/py_rrdtool-0.2.2-py2.7-linux-x86_64.egg</div><div>/omd/sites/sjopen/lib/python/netsnmp_python-1.0a1-py2.7-linux-x86_64.egg</div><div>/omd/sites/sjopen/lib/python27.zip</div><div>/omd/sites/sjopen/lib/python2.7</div><div>/omd/sites/sjopen/lib/python2.7/plat-linux2</div><div>/omd/sites/sjopen/lib/python2.7/lib-tk</div><div>/omd/sites/sjopen/lib/python2.7/lib-old</div><div>/omd/sites/sjopen/lib/python2.7/lib-dynload</div><div>/omd/sites/sjopen/lib/python2.7/site-packages</div></span>
</div>


<div id="disqus_thread"><iframe id="dsq-app641" name="dsq-app641" allowtransparency="true" scrolling="no" tabindex="0" title="Disqus" style="width: 1px !important; min-width: 100% !important; border: medium none !important; overflow: hidden !important; height: 305px !important;" src="Check_MK2_files/a.html" horizontalscrolling="no" verticalscrolling="no" width="100%" frameborder="0"></iframe><iframe id="indicator-north" name="indicator-north" allowtransparency="true" scrolling="no" tabindex="0" title="Disqus" style="width: 1680px !important; border: medium none !important; overflow: hidden !important; top: 0px !important; min-width: 1680px !important; max-width: 1680px !important; position: fixed !important; z-index: 2147483646 !important; height: 18px !important; min-height: 18px !important; max-height: 18px !important; display: none !important;" frameborder="0"></iframe><iframe id="indicator-south" name="indicator-south" allowtransparency="true" scrolling="no" tabindex="0" title="Disqus" style="width: 1680px !important; border: medium none !important; overflow: hidden !important; bottom: 0px !important; min-width: 1680px !important; max-width: 1680px !important; position: fixed !important; z-index: 2147483646 !important; height: 18px !important; min-height: 18px !important; max-height: 18px !important; display: none !important;" frameborder="0"></iframe></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://web2-cvwyjcqaye.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>



</a></div></div><iframe style="display: none;"></iframe></body></html>
